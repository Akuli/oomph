#!/bin/bash
# Make sure self-hosted compiler can do something to all oomph files, including itself.
# Currently, it tokenizes them all.

set -e

echo "make oomphc"
make oomphc

for file in tests/*.oomph builtins.oomph self_hosted/*.oomph; do
    if grep -q "^$file" tests/self_hosted_all_files_skip.txt; then
        continue
    fi

    command="./oomphc --ast $file"
    echo $command
    $command >/dev/null
done

echo "
================== success =================="

union Thing:
    Foo
    Bar
    Baz

# Can be defined after the union
class Foo(int foo_thing)
class Bar()
class Baz()

func print_thing(Thing thing):
    switch thing:
        case Foo f:
            print("Foo {f.foo_thing}")
        case Bar b:
            print("Bar {b}")
        case Baz b:
            print("Baz {b}")

    switch thing:
        case Foo f:
            print("  it's a Foo")
        case *:
            print("  it's not a Foo")
    print("After switch: {thing}")

export func main():
    print_thing(new Thing(new Foo(69)))
    print_thing(new Thing(new Bar()))
    print_thing(new Thing(new Baz()))
